sudo apt -y update
sudo apt -y upgrade
sudo apt-get install python3-pip libjpeg-dev libopenblas-dev libopenmpi-dev libomp-dev
sudo apt-get install git

echo <<-EOF >>.bashrc
export PATH="/home/nle/.local/bin:\$PATH"
EOF

echo <<-EOF >.vimrc
set nocp
set backspace=indent,eol,start
EOF

pip install setuptools==58.3.0
pip install Cython

pip install torch torchvision
pip install opencv-python
pip install numpy --upgrade

pip install jupyterlab scikit-learn pandas matplotlib ipywidgets

mkdir ~/notebooks
NOTEBOOKPATH=`readlink -f ~/notebooks`

JUPYTERLABPATH=`which jupyter-lab`
sudo bash -c "cat >/etc/systemd/system/jupyter.service" <<-EOV
[Unit]
Description=Jupyter Lab

[Service]
Type=simple
PIDFile=/run/jupyter.pid
ExecStart=/bin/bash -c "$JUPYTERLABPATH --ip="0.0.0.0" --no-browser --notebook-dir=$NOTEBOOKPATH --NotebookApp.token=nle23"
User=$USER
Group=$USER
WorkingDirectory=$NOTEBOOKPATH
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOV

sudo systemctl enable jupyter.service
sudo systemctl daemon-reload

sudo systemctl start jupyter.service


